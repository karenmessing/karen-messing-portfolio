/** ----------------------------------

  Work
  ----

  Work page layout.

---------------------------------- */
@mixin block-hover( $color ) {
  
  a:hover {
    color: shade( $color, 30 );
    background: rgba( $color, .1 );
  }
    
  a:hover:before,
  a:hover:after,
  a:hover span:before {
    background: rgba( $color, .1 );
  }
  
} // @mixin block-hover

.grid-block {
  
  @include span-columns(4);
  
  margin-bottom: gutter();
  
  @include desktop {
    
    &:nth-child(3n) {
      @include omega;
    }
    
  } // @include desktop
  
  @include tablet {
    
    @include span-columns(3);
    
    margin-bottom: gutter();
    
    &:nth-child(2n) {
      @include omega;
    }
    
  } // @include tablet
  
  @include phone {
    @include span-columns(1 omega);
    
    margin-bottom: 4%;
  }
  
  a {
    @include maintain-ratio(4 3);
    @include position(relative, 0, 1);
    
    display: block;
    width: 100%;
    min-height: 100px;
    background-color: $light-grey;
    background-size: cover;
    background-repeat: no-repeat;
    color: $secondary;
    text-align: center;
    font-family: $secondary-stack;
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 2px;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
    font-style: normal;
    
    &:hover {
      
      .block-title-wrap {
        opacity: 1;
      }
      
      img {
        opacity: .7;
      }
          
    } // &:hover
    
    img {
      vertical-align: top;
    }
    
  } // a
  
  .block-title-wrap,
  img,
  .featured-work & a {
    @include transition( opacity .2s );
  }
  
  .block-title-wrap {
    opacity: 0;
    display: block;
    position: absolute;
    top: 50%;
    margin-top: -20px;
    width: 100%;
  }
  
  .block-title {
    display: inline-block;
    padding: 13px 18px;
  }
  
  .featured-work & {
    
    a:after {
      @include position(absolute, 0px 0 0 0px);
      @include size( 100% );
      @include box-shadow( inset 0 0 0 2px $secondary );
      
      content: "";
      display: block;
      opacity: 0;
    }
    
    a:hover {
      
      &:after {
        opacity: 1;
      }
    
      .block-title {
        background: #fff;
      }
    
    } // a:hover
    
  } // .featured-work & a:hover
}

.description {
  @include squish(3,3);
  
  text-align: center;
  line-height: 1.8em;
}

.images {
  text-align: center;
}

// Featured work blocks.
.featured-work {
  .grid-block {
    &:hover {
      .block-title-wrap {
        @include translate3d(0, 0, 0);
      }
    }
  }
  
  .block-title-wrap {
    @include translate3d(0, -50%, 0);
    @include transition(.3s ease);
    @include transition-property(transform opacity);
    
    .block-title {
      background-color: white;
    }
  }
}

// Work categories. Series of gray-ish blocks at the bottom of the grid.
.work-categories {
  clear: left;
  
  $categories: invitations #CBD8E7, logos #F7D3D3, websites #CDF6E2;
  
  @each $category in $categories {
    .#{nth($category, 1)}:hover {
      background-color: nth($category, 2);
      
      .block-title-wrap {
        color: darken(saturate(nth($category, 2), 10%), 30%);
      }
    }
  }
  
  // Inidividual block.
  .grid-block {
    @include position(relative);
    @include transition(background-color .3s ease-out);
    
    overflow: hidden;
    background-color: #e4e4e4;
  }
    
  // Block link wrapper. Controls the size of the block.
  a {
    background-color: transparent;
  }
    
  // Block title.
  .block-title-wrap {
    @include opacity(1);
    @include transition(color .3s ease-out);
  }
  
  // Gray shades.
  .shade {
    @include position(absolute);
    @include transition(transform .3s ease-out);
    -webkit-backface-visibility: hidden;
    
    $positions: 0px 0 0 0px, 0px 0px, 0 0 0px 0px, 0 0px 0px;
    $adjust: .3;
    
    @for $index from 1 through 4 {
      &.index-#{$index} {
        @include pos-coords(nth($positions, $index));
        
        background-color: rgba(white, $adjust / 10);
      }
      
      $adjust: $adjust + 1;
    }
  }
}

.work-item {
  @include horizontal-divider( before, 20px, 20px );
  
  margin-top: 30px;
}

.work-nav {
  
  text-align: center;
  
  .navigation-arrow {
    display: inline-block;
  }
  
} // .work-nav

// Navigation arrows
$circle_size: 35px;
$arrow_width: 3px;

.navigation-arrow {
  
  @include size( $circle_size );
  
  display: block;
  border: 2px solid $primary;
  border-radius: $circle_size/2;
  position: relative;
  
  &:before,
  &:after {
    content: "";
    display: block;
    border: 8px solid transparent;
    position: absolute;
  }
  
  &.up {
    
    &:before,
    &:after {
      left: 50%;
      margin-left: -8px;
    }
    
    &:before {
      border-bottom-color: $primary;
      top: 2px;
    }
    
    &:after {
      border-bottom-color: #fff;
      top: 5px;
    }
    
  } // &.up
  
  &.right,
  &.left {
    
    &:before,
    &:after {
      left: 50%;
      top: 7px;
    }
    
  } // &.left, &.right
  
  &.right {
    
    &:before {
      border-left-color: $primary;
      margin-left: -2px;
    }
    
    &:after {
      border-left-color: #fff;
      margin-left: -5px;
    }
    
  } // &.right
  
  &.left {
    
    &:before {
      border-right-color: $primary;
      margin-left: -13px;
    }
    
    &:after {
      border-right-color: #fff;
      margin-left: -10px;
    }
    
  } // &.left
  
} // .navigation-arrow

.back-to-top {
  position: fixed;
  margin-left: ( $circle_size + 30 ) * -1;
}